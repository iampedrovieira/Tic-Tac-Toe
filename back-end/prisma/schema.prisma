// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Room {
  roomId Int @id @default(autoincrement())
  socketId String
  createdDate DateTime
  users User[]
  games Game[]
}

model User {
  userId Int @id @default(autoincrement())
  username String  @unique
  session_token String
  socketId String
  roomId Int?
  lastLogin DateTime
  room Room? @relation(fields: [roomId], references: [roomId])
  asplayer1 Game[] @relation("player1")
  asplayer2 Game[] @relation("player2")
}


model Game {
  gameId Int @id @default(autoincrement())
  roomId Int
  player1Id Int 
  timeToPlay1 Int
  player2Id Int
  timeToPlay2 Int
  playerwin Int
  lastUpdate DateTime
  plays Play[]
  room Room @relation(fields: [roomId], references: [roomId])
  player1 User @relation("player1",fields: [player1Id], references: [userId])
  player2 User @relation("player2",fields: [player2Id], references: [userId])
}

model Play {
  playId Int @id @default(autoincrement())
  gameId Int
  playerId Int
  positionx Int
  positiony Int
  game Game @relation(fields: [gameId], references: [gameId])
}


  